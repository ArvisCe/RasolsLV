<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chaotic Ad Wall</title>
<style>
html, body {
  margin: 0;
  height: 100%;
  overflow: hidden;
  background: #111;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.ad {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  font-weight: bold;
  border: 2px solid #fff;
  color: #000;
  box-shadow: 0 0 5px #fff;
  transition: transform 0.3s;
}
.ad:hover {
  transform: scale(1.1) rotate(5deg);
  box-shadow: 0 0 20px #fff;
  z-index: 100;
}
.ad div { line-height: 1.2; }
.middle { z-index: 999; }
a { text-decoration: none; color: inherit; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; height: 100%; }
</style>
</head>
<body>
<script>
const vw = window.innerWidth;
const vh = window.innerHeight;
const colors = ['#f28b82','#fbbc04','#34a853','#4285f4','#aa66cc','#ff7043','#00c851','#33b5e5','#ffbb33','#ff4444'];

const baseMiddleSize = Math.min(vw, vh) * 0.3;
const middleSize = baseMiddleSize * 1.5;
const bigSize = baseMiddleSize * 0.6;
const mediumSize = baseMiddleSize * 0.4;
const smallSize = baseMiddleSize * 0.25;

const placedAds = [];

// Create ad with deterministic index
function createAd(size, price, x, y, type='', index=null) {
  const div = document.createElement('div');
  div.classList.add('ad');
  if(type==='middle') div.classList.add('middle');
  div.style.width = `${size}px`;
  div.style.height = `${size}px`;
  div.style.left = `${x - size/2}px`;
  div.style.top = `${y - size/2}px`;
  div.style.background = colors[Math.floor(Math.random()*colors.length)];
  div.style.fontSize = `${Math.max(size*0.15, 12)}px`;

  if(index !== null) div.dataset.index = index;

  div.innerHTML = `<div>Vieta reklāmai</div><div>${price}</div>`;
  document.body.appendChild(div);
  placedAds.push({x, y, size});
  return div;
}

// Check minimal overlap with existing ads (~5px allowed)
function isValid(x, y, size) {
  for(const ad of placedAds){
    const dx = Math.abs(x - ad.x);
    const dy = Math.abs(y - ad.y);
    const minDist = (size + ad.size)/2 - 5;
    if(dx < minDist && dy < minDist) return false;
  }
  return true;
}

// Deterministic pseudo-random
function pseudo(seed, max) {
  const x = Math.sin(seed) * 10000;
  return Math.abs(x - Math.floor(x)) * max;
}

// Middle ad
const middleX = vw/2;
const middleY = vh/2;
createAd(middleSize, '10 €/mēnesī', middleX, middleY, 'middle', 0);

// Generate ads
function generateAds(count, size, price, seedStart) {
  let adCount = 0;
  let attemptOffset = 0;
  while(adCount < count){
    const seed = seedStart + adCount;
    let x = pseudo(seed*7 + attemptOffset, vw - size) + size/2;
    let y = pseudo(seed*13 + attemptOffset, vh - size) + size/2;

    if(isValid(x, y, size)){
      createAd(size, price, x, y, '', seedStart + adCount);
      adCount++;
      attemptOffset = 0;
    } else {
      attemptOffset++;
      if(attemptOffset > 50) {
        attemptOffset = 0;
        adCount++;
      }
    }
  }
}

// 15 big, 25 medium, 50 small
generateAds(15, bigSize, '4 €/mēnesī', 1);
generateAds(30, mediumSize, '2 €/mēnesī', 100);
generateAds(60, smallSize, '1 €/mēnesī', 200);

// Example: set a custom image, text, and link for a specific ad
function setAdContent(index, imageUrl, text, link){
  const ad = document.querySelector(`.ad[data-index="${index}"]`);
  if(!ad) return;
  ad.innerHTML = `
    <a href="${link}" target="_blank">
      <img src="${imageUrl}" style="width:90%;height:70%;object-fit:cover;border-radius:5px;">
      <div style="margin-top:5px;font-weight:bold;">${text}</div>
    </a>
  `;
}

// setAdContent(0, 'https://via.placeholder.com/300', 'Middle Ad', 'https://example.com');

</script>
</body>
</html>

