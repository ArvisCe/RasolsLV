<!DOCTYPE html>
<html lang="lv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chaotic Ad Wall</title>

<style>
html, body {
  margin: 0;
  height: 100%;
  background: #000;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  overflow-x: hidden;
}

#ad-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.ad {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  border: 2px solid #fff;
  background: #111;
  color: #fff;
  font-weight: bold;
  box-shadow: 0 0 6px #fff;
  overflow: hidden;
  transition: transform .25s, box-shadow .25s;
}

.ad:hover {
  transform: scale(1.06) rotate(2deg);
  box-shadow: 0 0 18px #fff;
  z-index: 200;
}

.ad.middle {
  z-index: 999;
}

.ad.filled {
  background: transparent;
  box-shadow: 0 0 10px #fff;
}

.ad a {
  width: 100%;
  height: 100%;
  display: block;
}

.ad img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.placeholder {
  line-height: 1.2;
}
</style>
</head>

<body>
<div id="ad-container"></div>

<script>
const container = document.getElementById('ad-container');

const colors = [
  '#f28b82','#fbbc04','#34a853','#4285f4',
  '#aa66cc','#ff7043','#00c851','#33b5e5',
  '#ffbb33','#ff4444'
];

let placedAds = [];
const customAds = [];

function pseudo(seed, max) {
  return Math.abs(Math.sin(seed) * 10000 % 1) * max;
}

function getSizes() {
  const base = Math.min(innerWidth, innerHeight) * 0.3;
  return {
    middle: base * 1.5,
    big: base * 0.6,
    medium: base * 0.42,
    small: base * 0.28
  };
}

function clearAds() {
  container.innerHTML = '';
  placedAds = [];
}

function isValid(x, y, size) {
  for (const ad of placedAds) {
    const dx = Math.abs(x - ad.x);
    const dy = Math.abs(y - ad.y);
    const minDist = (size + ad.size) / 2 - 6;
    if (dx < minDist && dy < minDist) return false;
  }
  return true;
}

function createAd(size, price, x, y, index, type = '') {
  const ad = document.createElement('div');
  ad.className = 'ad' + (type === 'middle' ? ' middle' : '');
  ad.dataset.index = index;

  ad.style.width = ad.style.height = size + 'px';
  ad.style.left = (x - size / 2) + 'px';
  ad.style.top = (y - size / 2) + 'px';
  ad.style.background = colors[index % colors.length];
  ad.style.fontSize = Math.max(size * 0.14, 11) + 'px';

  ad.innerHTML = `
    <div class="placeholder">
      <div>Vieta reklāmai</div>
      <div>${price}</div>
    </div>
  `;

  container.appendChild(ad);
  placedAds.push({ x, y, size });
}

function generateGroup(count, size, price, seedBase, vw, vh, avoidMiddle) {
  let created = 0;
  let attempts = 0;
  const cx = vw / 2;
  const cy = vh / 2;

  while (created < count && attempts < count * 80) {
    const seed = seedBase + created + attempts;
    let x = pseudo(seed * 7, vw - size) + size / 2;
    let y = pseudo(seed * 13, vh - size) + size / 2;

    if (avoidMiddle) {
      const safe = getSizes().middle / 2 + size / 2 + 12;
      if (Math.abs(x - cx) < safe && Math.abs(y - cy) < safe) {
        x += x < cx ? -safe : safe;
        y += y < cy ? -safe : safe;
      }
    }

    if (isValid(x, y, size)) {
      createAd(size, price, x, y, seedBase + created);
      created++;
    }
    attempts++;
  }
}

function setAdContent(index, image, link) {
  customAds.push({ index, image, link });
  applyAdContent(index, image, link);
}

function applyAdContent(index, image, link) {
  const ad = document.querySelector(`.ad[data-index="${index}"]`);
  if (!ad) return;

  ad.classList.add('filled');
  ad.style.background = 'transparent';

  ad.innerHTML = `
    <a href="${link}" target="_blank">
      <img src="${image}">
    </a>
  `;
}

function generateLayout() {
  clearAds();

  const vw = innerWidth;
  const vh = innerHeight;
  const sizes = getSizes();

  if (vh > vw) {
    createAd(sizes.middle, '20 €/mēnesī', vw / 2, sizes.middle / 2 + 24, 0, 'middle');
  } else {
    createAd(sizes.middle, '20 €/mēnesī', vw / 2, vh / 2, 0, 'middle');
  }

  generateGroup(15, sizes.big, '4 €/mēnesī', 1, vw, vh, true);
  generateGroup(25, sizes.medium, '2 €/mēnesī', 100, vw, vh, true);
  generateGroup(50, sizes.small, '1 €/mēnesī', 200, vw, vh, true);

  customAds.forEach(ad =>
    applyAdContent(ad.index, ad.image, ad.link)
  );
}

generateLayout();

setAdContent(
  0,
  'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRYkfbTSWQD_drBS40p7TJGFpotL1r2yU05qA&s',
  'https://tiktok.com/@arv.is'
);

setAdContent(
  10,
  'adImages/Ernests.webp',
  'https://x.com/crowsnestesport'
);

SetAdContent(
  9,
  'adImages/VaibsCuratajs.jpeg',
  'https://www.tiktok.com/@vaibs.urators' 
)

window.addEventListener('resize', generateLayout);
</script>

<script>
    fetch('https://api.counterapi.dev/v2/arvis-ceiruliss-team-2383/first-counter-2383/up', { method: 'GET' });
</script>
</body>
</html>

